---
phase: 04-live-features
plan: 01
type: execute
wave: 1
depends_on: ["03-02"]
files_modified:
  - components/SessionStats.tsx
  - components/HowItWorksModal.tsx
  - components/GameLayout.tsx
  - lib/game-state.tsx
  - app/page.tsx
autonomous: true
must_haves:
  truths:
    - "Right panel shows Motherlode pool size"
    - "Right panel shows OIL Reserve and Payout Reserve"
    - "Right panel shows session stats (tiles flipped, P/L)"
    - "How It Works button opens step-by-step modal"
    - "Modal has Next/Back navigation through all steps"
  artifacts:
    - path: components/SessionStats.tsx
      provides: "Stats panel with reserves and Motherlode"
      contains: "Motherlode"
    - path: components/HowItWorksModal.tsx
      provides: "Step-by-step explainer modal"
      contains: "HowItWorks"
  key_links: []
---

<objective>
Expand the right panel with live stats (Motherlode pool, reserves) and add a "How It Works" modal with step-by-step navigation.

Purpose: STAT-01, STAT-02, STAT-03, STAT-04. Transparency and onboarding.
Output: Full stats panel, HowItWorksModal component.
</objective>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/REQUIREMENTS.md

From spec: Economics 10% Motherlode, 30% OIL Reserve, 60% Payout Reserve. Stats are mocked for MVP (derived from session or fixed demo values). How It Works explains game flow, economics, and Motherlode.
</context>

<tasks>

<task type="auto">
  <name>Task 1: Stats panel - Motherlode and reserves</name>
  <files>components/SessionStats.tsx, lib/game-state.tsx</files>
  <action>
    Add to game state (or derive): motherlodePool (number), oilReserve (number), payoutReserve (number). Use mocked values for MVP (e.g. motherlodePool from session activity or fixed "12,450 SOL"). Expand SessionStats to display: Motherlode pool size (prominent), OIL Reserve, Payout Reserve, Session (tiles flipped, P/L). Match dark premium styling. Use formatCost or similar for large numbers.
  </action>
  <verify>Right panel shows all four stat blocks; values render</verify>
  <done>STAT-01, STAT-02 satisfied</done>
</task>

<task type="auto">
  <name>Task 2: How It Works button and modal</name>
  <files>components/HowItWorksModal.tsx, components/SessionStats.tsx or GameLayout</files>
  <action>
    Create HowItWorksModal: full-screen overlay or centered modal (z-50), dark backdrop. Content: 4â€“6 steps explaining (1) Pick a tile and drill, (2) Outcomes (Dry/Oil/Refinery/Motherlode), (3) Economics (10/30/60 split), (4) Motherlode jackpot, (5) Volatility and chance. Each step is a panel with title + body text. Next and Back buttons at bottom. Close (X) button. State: currentStep (0..n-1), open/closed. Trigger from "How it Works" button in stats panel or header.
  </action>
  <verify>Button opens modal; Next/Back cycle through steps; Close dismisses</verify>
  <done>STAT-04 satisfied</done>
</task>

<task type="auto">
  <name>Task 3: Wire modal trigger</name>
  <files>components/SessionStats.tsx, app/page.tsx, components/GameLayout.tsx</files>
  <action>
    Add "How it Works" button to SessionStats (or Header). Use React state (useState) for modal open/close. Render HowItWorksModal when open. Ensure modal is accessible (focus trap, escape key to close).
  </action>
  <verify>How it Works button visible; clicking opens modal; Escape closes</verify>
  <done>STAT-04 fully wired</done>
</task>

</tasks>

<verification>
- [ ] npm run build succeeds
- [ ] Right panel shows Motherlode, reserves, session stats
- [ ] How it Works button opens modal
- [ ] Modal Next/Back navigation works
</verification>

<success_criteria>
- Stats panel complete with all transparency metrics
- How It Works modal explains game and economics
</success_criteria>

<output>
After completion, create .planning/phases/04-live-features/04-01-SUMMARY.md
</output>
